{"ast":null,"code":"import React,{useEffect,useState}from'react';import{BrowserRouter,Routes,Route,Outlet,Navigate}from'react-router-dom';import{Header,Footer}from'../../containers/index';import{Home,Topics,Topic,Posts,Post,Popular,Bookmarks,Courses,Course,Createpost,Profile,Registration,Search_results,Login,Createcourse}from'../../pages/index';import'./router.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Router=()=>{const[user,setUser]=useState(null);useEffect(()=>{axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/current_user\")).then(response=>{const{username,_id}=response.data;setUser({username,_id});}).catch(error=>{console.error('Error fetching user:',error);setUser(null);});},[]);const logout=()=>{axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/logout\")).then(()=>{setUser(null);}).catch(error=>{console.error('Logout error:',error);});};const Layout=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"layout__container\",children:[/*#__PURE__*/_jsx(Header,{user:user,logout:logout}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsx(Footer,{})]});};const BrowserRoutes=()=>{return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(Routes,{children:/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Layout,{}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Home,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(Home,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/topics\",element:/*#__PURE__*/_jsx(Topics,{})}),/*#__PURE__*/_jsx(Route,{path:\"/topics/:id\",element:/*#__PURE__*/_jsx(Topic,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/posts\",element:/*#__PURE__*/_jsx(Posts,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:id\",element:/*#__PURE__*/_jsx(Post,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/popular\",element:/*#__PURE__*/_jsx(Popular,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/bookmarks\",element:/*#__PURE__*/_jsx(Bookmarks,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/courses\",element:/*#__PURE__*/_jsx(Courses,{})}),/*#__PURE__*/_jsx(Route,{path:\"/courses/:id\",element:/*#__PURE__*/_jsx(Course,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/createpost\",element:user?/*#__PURE__*/_jsx(Createpost,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/home\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/createcourse\",element:user?/*#__PURE__*/_jsx(Createcourse,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/home\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Home,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/profile/:id\",element:/*#__PURE__*/_jsx(Profile,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/search-results\",element:/*#__PURE__*/_jsx(Search_results,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/home\",replace:true}):/*#__PURE__*/_jsx(Registration,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/home\",replace:true}):/*#__PURE__*/_jsx(Login,{})})]})})});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(BrowserRoutes,{})});};export default Router;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Routes","Route","Outlet","Navigate","Header","Footer","Home","Topics","Topic","Posts","Post","Popular","Bookmarks","Courses","Course","Createpost","Profile","Registration","Search_results","Login","Createcourse","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Router","user","setUser","get","concat","process","env","REACT_APP_API_URL","then","response","username","_id","data","catch","error","console","logout","Layout","className","children","BrowserRoutes","path","element","index","to","replace"],"sources":["C:/Users/minem/OneDrive/Documents/GitHub/Taft-Overflow/client/src/components/router/Router.jsx"],"sourcesContent":["import React, { useEffect, useState }  from 'react'\r\n\r\nimport { BrowserRouter,Routes, Route, Outlet, Navigate } from 'react-router-dom'\r\n\r\nimport {Header,Footer} from '../../containers/index';\r\n\r\nimport { Home, Topics, Topic,Posts, Post, Popular, Bookmarks, Courses, Course, Createpost, Profile, Registration, Search_results, Login, Createcourse } from '../../pages/index';\r\n\r\nimport './router.css'\r\n\r\nimport axios from 'axios'\r\n\r\n\r\nconst Router = () => {\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(() => {\r\n        axios.get(`${process.env.REACT_APP_API_URL}/api/current_user`)\r\n          .then(response => {\r\n            const { username, _id } = response.data;\r\n            setUser({ username, _id }); \r\n          })\r\n          .catch(error => {\r\n            console.error('Error fetching user:', error);\r\n            setUser(null);\r\n          });\r\n    }, []);\r\n\r\n    const logout = () => {\r\n        axios.get(`${process.env.REACT_APP_API_URL}/api/logout`)\r\n          .then(() => {\r\n            setUser(null);\r\n          })\r\n          .catch(error => {\r\n            console.error('Logout error:', error);\r\n          });\r\n      };\r\n\r\n    const Layout = () => {\r\n        return (\r\n            <div className=\"layout__container\">\r\n                <Header user={user} logout={logout}/>\r\n                <Outlet/>\r\n                <Footer/>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    const BrowserRoutes = () => {\r\n        return (\r\n            <BrowserRouter>\r\n                <Routes>\r\n                    <Route path='/' element={<Layout/>}>\r\n                        <Route index element={<Home user={user}/>} />\r\n                        <Route path='/home' element={<Home user={user}/>} />\r\n                        <Route path='/topics' element={<Topics/>}/>\r\n                        <Route path='/topics/:id' element={<Topic user={user}/>}/>\r\n                        <Route path='/posts' element={<Posts user={user}/>}/>\r\n                        <Route path='/posts/:id' element={<Post user={user}/>}/>\r\n                        <Route path='/popular' element={<Popular user={user}/>}/>\r\n                        <Route path='/bookmarks' element={<Bookmarks user={user}/>}/>\r\n                        <Route path='/courses' element={<Courses/>}/>\r\n                        <Route path='/courses/:id' element={<Course user={user}/>}/>\r\n                        <Route\r\n                            path='/createpost'\r\n                            element={user ? <Createpost user={user} /> : <Navigate to='/home' replace />}\r\n                        />\r\n                        <Route\r\n                            path='/createcourse'\r\n                            element={user ? <Createcourse user={user} /> : <Navigate to='/home' replace />}\r\n                        />\r\n\r\n                        <Route path='*' element={<Home user={user}/>} />\r\n                        <Route path='/profile/:id' element={<Profile user={user}/>}/>\r\n                        <Route path='/search-results' element={<Search_results user={user}/>}/>\r\n                        <Route path='/register' element={user ? <Navigate to='/home' replace /> : <Registration />} />\r\n                        <Route path='/login' element={user ? <Navigate to='/home' replace /> : <Login />} />\r\n                    </Route>\r\n                </Routes>\r\n            </BrowserRouter>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <BrowserRoutes/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Router"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}