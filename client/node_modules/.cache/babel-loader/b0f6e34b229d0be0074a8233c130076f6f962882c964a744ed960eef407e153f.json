{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./course_container.css';//import {Post} from '../../components/index';\nimport axios from'axios';import{useParams}from'react-router-dom';import{Post}from'../../components/index';import course_cover from'../../assets/images/csarch1cover.jpg';import course_picture from'../../assets/images/csarch1logo.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Course_container=_ref=>{let{user}=_ref;const{id}=useParams();const[posts,setPosts]=useState([]);const[isJoined,setIsJoined]=useState(false);const[courseId,setCourseId]=useState(null);//get all courses joined by the user\n// useEffect(() => {\n//   if (user) {\n//     axios.get(`${process.env.REACT_APP_API_URL}/api/courses/user/${user.username}`)\n//       .then(res => {\n//         // Assuming the response contains an array of course objects\n//         const joinedCourses = res.data;\n//         const course = joinedCourses.find(course => course.course_name === id);\n//         if (course) {\n//           setIsJoined(true);\n//         } else {\n//           setIsJoined(false);\n//         }\n//       })\n//       .catch(err => console.log(err));\n//   }\n// }, [id, user?.username]);\nconst fetchJoined=()=>{if(user){axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/courses/user/\").concat(user.username)).then(res=>{// Assuming the response contains an array of course objects\nconst joinedCourses=res.data;const course=joinedCourses.find(course=>course.course_name===id);if(course){setIsJoined(true);}else{setIsJoined(false);}}).catch(err=>console.log(err));}};useEffect(()=>{fetchJoined();},[id,user===null||user===void 0?void 0:user.username]);useEffect(()=>{axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/posts\")).then(res=>{const filteredPosts=res.data.filter(post=>post.type==='regular'&&post.course_id.name===String(id));setPosts(filteredPosts);}).catch(err=>console.log(err));},[id]);useEffect(()=>{axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/courses/\").concat(id)).then(res=>{const{course_id}=res.data;setCourseId(course_id);}).catch(err=>console.log(err));},[id]);const join=()=>{const formData={user_id:user._id,course_id:courseId};console.log(formData);axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/join_course\"),formData).then(res=>{console.log(res.data);fetchJoined();}).catch(err=>console.log(err));};const Posts=posts.slice(0,10).map((content,index)=>/*#__PURE__*/_jsx(Post,{user:user,contents:content},index));return/*#__PURE__*/_jsxs(\"div\",{className:\"course__container section__padding\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course_header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"course_header__cover-photo\",style:{backgroundImage:\"url(\".concat(course_cover,\")\")}}),/*#__PURE__*/_jsxs(\"div\",{className:\"course_header__profile-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"course_header__course-picture\",style:{backgroundImage:\"url(\".concat(course_picture,\")\")}}),/*#__PURE__*/_jsxs(\"div\",{className:\"course_header__profilecontainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course_header__course-name\",children:[\"c/\",id]}),/*#__PURE__*/_jsx(\"button\",{className:\"course_header__right-button\",disabled:!user,onClick:join,children:isJoined?'Joined':'Join'})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"topic__contents\",children:Posts})]});};export default Course_container;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","Post","course_cover","course_picture","jsx","_jsx","jsxs","_jsxs","Course_container","_ref","user","id","posts","setPosts","isJoined","setIsJoined","courseId","setCourseId","fetchJoined","get","concat","process","env","REACT_APP_API_URL","username","then","res","joinedCourses","data","course","find","course_name","catch","err","console","log","filteredPosts","filter","post","type","course_id","name","String","join","formData","user_id","_id","Posts","slice","map","content","index","contents","className","children","style","backgroundImage","disabled","onClick"],"sources":["C:/Users/minem/OneDrive/Documents/GitHub/Taft-Overflow/client/src/containers/course_container/Course_container.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport './course_container.css';\r\n//import {Post} from '../../components/index';\r\nimport axios from 'axios';\r\nimport {useParams} from 'react-router-dom'\r\nimport {Post} from '../../components/index';\r\nimport course_cover from '../../assets/images/csarch1cover.jpg';\r\nimport course_picture from '../../assets/images/csarch1logo.png';\r\n\r\n\r\nconst Course_container = ({user}) => {\r\n  const {id} = useParams();\r\n  const [posts,setPosts] = useState([])\r\n  const [isJoined, setIsJoined] = useState(false);\r\n  const [courseId, setCourseId] = useState(null)\r\n  //get all courses joined by the user\r\n  // useEffect(() => {\r\n  //   if (user) {\r\n  //     axios.get(`${process.env.REACT_APP_API_URL}/api/courses/user/${user.username}`)\r\n  //       .then(res => {\r\n  //         // Assuming the response contains an array of course objects\r\n  //         const joinedCourses = res.data;\r\n  //         const course = joinedCourses.find(course => course.course_name === id);\r\n  //         if (course) {\r\n  //           setIsJoined(true);\r\n  //         } else {\r\n  //           setIsJoined(false);\r\n  //         }\r\n  //       })\r\n  //       .catch(err => console.log(err));\r\n  //   }\r\n  // }, [id, user?.username]);\r\n  \r\n  const fetchJoined = () =>{\r\n      if (user) {\r\n        axios.get(`${process.env.REACT_APP_API_URL}/api/courses/user/${user.username}`)\r\n          .then(res => {\r\n            // Assuming the response contains an array of course objects\r\n            const joinedCourses = res.data;\r\n            const course = joinedCourses.find(course => course.course_name === id);\r\n            if (course) {\r\n              setIsJoined(true);\r\n            } else {\r\n              setIsJoined(false);\r\n            }\r\n          })\r\n          .catch(err => console.log(err));\r\n      }\r\n  }\r\n  useEffect(() => {\r\n    fetchJoined()\r\n  }, [id, user?.username]);\r\n\r\n  useEffect( () => {\r\n    axios.get(`${process.env.REACT_APP_API_URL}/api/posts`)\r\n      .then(res => {\r\n        const filteredPosts = res.data.filter(post => \r\n          post.type === 'regular' && post.course_id.name === String(id)\r\n        );\r\n        setPosts(filteredPosts);\r\n      }).catch(err=> console.log(err));\r\n  },[id]);\r\n\r\n  useEffect( () => {\r\n    axios.get(`${process.env.REACT_APP_API_URL}/api/courses/${id}`)\r\n      .then(res => {\r\n        const { course_id } = res.data;\r\n        setCourseId(course_id);\r\n      }).catch(err=> console.log(err));\r\n  },[id]);\r\n\r\n  const join = () => {\r\n    const formData = {\r\n      user_id: user._id,\r\n      course_id: courseId\r\n    };\r\n    console.log(formData);\r\n    axios.post(`${process.env.REACT_APP_API_URL}/api/join_course`, formData)\r\n      .then(res => {\r\n        console.log(res.data);\r\n        fetchJoined();\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n\r\n  const Posts = posts.slice(0,10).map((content, index) => \r\n    <Post key={index} user={user} contents={content}></Post>\r\n  );\r\n\r\n  return (\r\n    \r\n      <div className='course__container section__padding'>\r\n      <div className='course_header'>\r\n        <div className=\"course_header__cover-photo\" style={{ backgroundImage: `url(${course_cover})` }}></div>\r\n        <div className=\"course_header__profile-container\">\r\n        <div className=\"course_header__course-picture\" style={{ backgroundImage: `url(${course_picture})` }}></div>\r\n          <div className=\"course_header__profilecontainer\">\r\n            <div className=\"course_header__course-name\">c/{id}</div>\r\n            <button className=\"course_header__right-button\" disabled={!user} onClick={join} >\r\n              {isJoined ? 'Joined' : 'Join'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className='topic__contents'>\r\n        {Posts}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Course_container"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}