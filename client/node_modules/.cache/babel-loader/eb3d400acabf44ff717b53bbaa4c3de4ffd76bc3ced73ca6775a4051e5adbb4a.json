{"ast":null,"code":"import React,{useEffect,useState}from'react';import'draft-js/dist/Draft.css';import'./create_course.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Create_course=_ref=>{let{user}=_ref;const[courses,setCourses]=useState([]);// const [user, setUser] = useState(null);\n// useEffect(() => {\n//     axios.get('${process.env.REACT_APP_API_URL}/api/current_user')\n//       .then(response => {\n//         const { username, _id } = response.data;\n//         setUser({ username, _id }); \n//       })\n//       .catch(error => {\n//         console.error('Error fetching user:', error);\n//       });\n// }, []);\nconst resetForm=()=>{document.getElementById('title').value='';};const handleAddCourse=async e=>{e.preventDefault();// Prevent default form submission\nconst title=document.getElementById('title').value;await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/courses/add\"),{course_name:title}).then(response=>{// Handle success\nconsole.log(response.data);alert(\"Course created successfully!\");}).catch(error=>{// Handle error\nconsole.log(error);});fetchCourses();resetForm();};const fetchCourses=()=>{//console.log(process.env.REACT_APP_API_URL)  \nif(user){axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/courses\")).then(res=>setCourses(res.data)).catch(err=>console.log(err));}};useEffect(()=>{fetchCourses();},[user]);const Courses=courses.map((content,index)=>/*#__PURE__*/_jsx(\"option\",{value:content._id,children:'c/'+content.name},index));const handleDeleteCourse=async e=>{e.preventDefault();// Prevent default form submission\nconst course=document.getElementById('course').value;await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/courses/delete\"),{course_id:course}).then(response=>{// Handle success\nconsole.log(response.data);alert(\"Course deleted successfully!\");}).catch(error=>{// Handle error\nconsole.log(error);});fetchCourses();resetForm();};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-course-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group-title\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"create-course-header\",children:\"Course Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",type:\"text\",className:\"title-input\",placeholder:\"Input Course Name Here\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddCourse,className:\"course-button\",children:\"Create Course\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group-row\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"course\",className:\"course-select\",placeholder:\"Course\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,selected:true,hidden:true,children:\"Choose a Course...\"}),Courses]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteCourse,className:\"course-button\",children:\"Delete Course\"})]});};export default Create_course;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Create_course","_ref","user","courses","setCourses","resetForm","document","getElementById","value","handleAddCourse","e","preventDefault","title","post","concat","process","env","REACT_APP_API_URL","course_name","then","response","console","log","data","alert","catch","error","fetchCourses","get","res","err","Courses","map","content","index","_id","children","name","handleDeleteCourse","course","course_id","className","id","type","placeholder","onClick","disabled","selected","hidden"],"sources":["C:/Users/minem/OneDrive/Documents/GitHub/Taft-Overflow/client/src/components/create_course/Create_course.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport 'draft-js/dist/Draft.css';\r\nimport './create_course.css';\r\nimport axios from 'axios';\r\n\r\nconst Create_course = ({user}) => {\r\n    const [courses, setCourses] = useState([]);\r\n    // const [user, setUser] = useState(null);\r\n\r\n    // useEffect(() => {\r\n    //     axios.get('${process.env.REACT_APP_API_URL}/api/current_user')\r\n    //       .then(response => {\r\n    //         const { username, _id } = response.data;\r\n    //         setUser({ username, _id }); \r\n    //       })\r\n    //       .catch(error => {\r\n    //         console.error('Error fetching user:', error);\r\n    //       });\r\n    // }, []);\r\n    const resetForm = () => {\r\n        document.getElementById('title').value = '';\r\n    };\r\n\r\n    const handleAddCourse = async(e) => {\r\n        e.preventDefault(); // Prevent default form submission\r\n        const title = document.getElementById('title').value;\r\n        \r\n        await axios.post(`${process.env.REACT_APP_API_URL}/api/courses/add`, {\r\n            course_name: title\r\n        }).then(response => {\r\n            // Handle success\r\n            console.log(response.data);\r\n            alert(\"Course created successfully!\");\r\n        })\r\n        .catch(error => {\r\n            // Handle error\r\n            console.log(error);\r\n        });\r\n        fetchCourses();\r\n        resetForm();\r\n    };\r\n\r\n    const fetchCourses = () => {\r\n        //console.log(process.env.REACT_APP_API_URL)  \r\n        if (user) {\r\n            axios.get(`${process.env.REACT_APP_API_URL}/api/courses`)\r\n              .then(res => setCourses(res.data))\r\n              .catch(err => console.log(err));\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchCourses();\r\n    }, [user]);\r\n\r\n    const Courses = courses.map((content, index) => \r\n        <option key={index} value={content._id}>{'c/'+content.name}</option>\r\n    );\r\n\r\n    const handleDeleteCourse = async(e) => {\r\n        e.preventDefault(); // Prevent default form submission\r\n        const course = document.getElementById('course').value;\r\n        \r\n        await axios.post(`${process.env.REACT_APP_API_URL}/api/courses/delete`, {\r\n            course_id: course\r\n        }).then(response => {\r\n            // Handle success\r\n            console.log(response.data);\r\n            alert(\"Course deleted successfully!\");\r\n        })\r\n        .catch(error => {\r\n            // Handle error\r\n            console.log(error);\r\n        });\r\n        fetchCourses();\r\n        resetForm();\r\n    };\r\n\r\n    return (\r\n\r\n        <div className=\"create-course-container\">\r\n                <div className='form-group-row'>\r\n        \r\n                    <div className=\"form-group-title\">\r\n                        <p className='create-course-header'>Course Name</p>\r\n                        <input id='title' type=\"text\" className=\"title-input\" placeholder=\"Input Course Name Here\" />\r\n                    </div>\r\n                </div>\r\n                <button onClick={handleAddCourse} className=\"course-button\">Create Course</button>\r\n\r\n                <div className='form-group-row'>\r\n                    <select id='course' className=\"course-select\" placeholder='Course'>\r\n                            <option value=\"\" disabled selected hidden>Choose a Course...</option>\r\n                            {Courses}\r\n                    </select>\r\n                </div>\r\n                <button onClick={handleDeleteCourse} className=\"course-button\">Delete Course</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Create_course;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}