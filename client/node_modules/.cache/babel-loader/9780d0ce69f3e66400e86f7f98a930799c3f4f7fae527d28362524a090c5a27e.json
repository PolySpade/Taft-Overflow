{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./posts_container.css';import{Post}from'../../components/index';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PostsPerPage=10;const Posts_container=_ref=>{let{user}=_ref;const[posts,setPosts]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);useEffect(()=>{axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/posts\")).then(res=>{const regularPosts=res.data.filter(post=>post.type==='regular').sort((a,b)=>new Date(b.entryDate)-new Date(a.entryDate));setPosts(regularPosts);setTotalPages(Math.ceil(regularPosts.length/PostsPerPage));}).catch(err=>console.log(err));},[]);const indexOfLastPost=currentPage*PostsPerPage;const indexOfFirstPost=indexOfLastPost-PostsPerPage;//console.log(indexOfFirstPost + ' ' + indexOfLastPost);\nconst currentPosts=posts.slice(indexOfFirstPost,indexOfLastPost);const paginate=pageNumber=>setCurrentPage(pageNumber);const Posts=currentPosts.map((content,index)=>/*#__PURE__*/_jsx(Post,{user:user,contents:content},index));return/*#__PURE__*/_jsxs(\"div\",{className:\"posts__container section__padding\",children:[Posts,/*#__PURE__*/_jsxs(\"div\",{className:\"posts__pagination\",children:[currentPage>1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>paginate(currentPage-1),children:\"Prev\"}),Array.from({length:totalPages},(_,i)=>i+1).map(number=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>paginate(number),className:currentPage===number?'active':'',children:number},number)),currentPage<totalPages&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>paginate(currentPage+1),children:\"Next\"})]})]});};export default Posts_container;","map":{"version":3,"names":["React","useEffect","useState","Post","axios","jsx","_jsx","jsxs","_jsxs","PostsPerPage","Posts_container","_ref","user","posts","setPosts","currentPage","setCurrentPage","totalPages","setTotalPages","get","concat","process","env","REACT_APP_API_URL","then","res","regularPosts","data","filter","post","type","sort","a","b","Date","entryDate","Math","ceil","length","catch","err","console","log","indexOfLastPost","indexOfFirstPost","currentPosts","slice","paginate","pageNumber","Posts","map","content","index","contents","className","children","onClick","Array","from","_","i","number"],"sources":["C:/Users/minem/OneDrive/Documents/GitHub/Taft-Overflow/client/src/containers/posts_container/Posts_container.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './posts_container.css';\r\nimport { Post } from '../../components/index';\r\nimport axios from 'axios';\r\n\r\nconst PostsPerPage = 10; \r\n\r\nconst Posts_container = ({user}) => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n\r\n  useEffect(() => {\r\n    axios.get(`${process.env.REACT_APP_API_URL}/api/posts`)\r\n      .then(res => {\r\n        const regularPosts = res.data.filter(post => post.type === 'regular').sort((a, b) => new Date(b.entryDate) - new Date(a.entryDate));\r\n        setPosts(regularPosts);\r\n        setTotalPages(Math.ceil(regularPosts.length / PostsPerPage));\r\n      }).catch(err => console.log(err));\r\n  }, []);\r\n\r\n  \r\n  const indexOfLastPost = currentPage * PostsPerPage;\r\n  const indexOfFirstPost = indexOfLastPost - PostsPerPage;\r\n  //console.log(indexOfFirstPost + ' ' + indexOfLastPost);\r\n  const currentPosts = posts.slice(indexOfFirstPost, indexOfLastPost);\r\n\r\n  const paginate = (pageNumber) => setCurrentPage(pageNumber);\r\n\r\n  const Posts = currentPosts.map((content, index) =>\r\n    <Post user={user} key={index} contents={content}></Post>\r\n  );\r\n\r\n  return (\r\n    <div className='posts__container section__padding'>\r\n      {Posts}\r\n      <div className=\"posts__pagination\">\r\n        {currentPage > 1 && (\r\n          <button onClick={() => paginate(currentPage - 1)}>Prev</button>\r\n        )}\r\n        {Array.from({ length: totalPages }, (_, i) => i + 1).map(number => (\r\n          <button key={number} onClick={() => paginate(number)} className={currentPage === number ? 'active' : ''}>\r\n            {number}\r\n          </button>\r\n        ))}\r\n        {currentPage < totalPages && (\r\n          <button onClick={() => paginate(currentPage + 1)}>Next</button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Posts_container;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}