{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./comments.css';import{Link}from'react-router-dom';import axios from'axios';import delete_icon from'../../assets/icons/delete.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Comments=_ref=>{let{user,contents}=_ref;const[isOwner,setIsOwner]=useState(false);function formatDate(date){return new Date(date).toLocaleDateString(\"en-US\",{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit',second:'2-digit'});}useEffect(()=>{if(user){if(user.username===username||user.username==='admin'){setIsOwner(true);}else{setIsOwner(false);}}});// Safely access properties using optional chaining\nconst comment_id=contents===null||contents===void 0?void 0:contents._id;const user_id=contents===null||contents===void 0?void 0:contents.user_id;const content=contents===null||contents===void 0?void 0:contents.content;const date=contents?formatDate(contents.entryDate):'Loading date...';const username=contents===null||contents===void 0?void 0:contents.user_id.username;const profile_image=contents===null||contents===void 0?void 0:contents.user_id.profile_img;//console.log(contents);\n//console.log(content);\nconst handleDeleteComment=async()=>{try{await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/comments/delete\"),{comment_id:comment_id});alert(\"Comment Deleted!\");window.location.reload();}catch(e){console.log(e);}};return/*#__PURE__*/_jsx(\"div\",{className:\"comment-box__container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"comments-list\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"comment comment--root\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment__bar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"comment__header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"comment__header-left_container\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"comment__author-avatar\",src:profile_image,alt:\"Profile Pic\"}),/*#__PURE__*/_jsx(Link,{to:'/profile/'+username,children:/*#__PURE__*/_jsx(\"span\",{className:\"comment__author-name\",children:username})}),isOwner&&/*#__PURE__*/_jsx(\"button\",{className:\"post-header__edit-button\",type:\"button\",onClick:handleDeleteComment,children:/*#__PURE__*/_jsx(\"img\",{src:delete_icon})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"comment__content\",children:content}),/*#__PURE__*/_jsx(\"span\",{className:\"comment__date\",children:date})]})})});};export default Comments;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","delete_icon","jsx","_jsx","jsxs","_jsxs","Comments","_ref","user","contents","isOwner","setIsOwner","formatDate","date","Date","toLocaleDateString","year","month","day","hour","minute","second","username","comment_id","_id","user_id","content","entryDate","profile_image","profile_img","handleDeleteComment","post","concat","process","env","REACT_APP_API_URL","alert","window","location","reload","e","console","log","className","children","src","alt","to","type","onClick"],"sources":["C:/Users/minem/OneDrive/Documents/GitHub/Taft-Overflow/client/src/components/comments/Comments.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport './comments.css'\r\nimport {Link} from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport delete_icon from '../../assets/icons/delete.svg';\r\n\r\nconst Comments = ({user,contents}) => {\r\n  const [isOwner, setIsOwner] = useState(false);\r\n\r\n  function formatDate(date) {\r\n    return new Date(date).toLocaleDateString(\"en-US\", {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit'\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(user){\r\n       if(user.username === username || user.username === 'admin'){\r\n         setIsOwner(true)\r\n       }else{\r\n         setIsOwner(false)\r\n       }\r\n    } \r\n   })\r\n\r\n  // Safely access properties using optional chaining\r\n  const comment_id = contents?._id;\r\n  const user_id = contents?.user_id;\r\n  const content = contents?.content;\r\n  const date = contents ? formatDate(contents.entryDate) : 'Loading date...';\r\n  const username = contents?.user_id.username;\r\n  const profile_image = contents?.user_id.profile_img;\r\n  //console.log(contents);\r\n  //console.log(content);\r\n  const handleDeleteComment = async() => {\r\n    try{\r\n      await axios.post(`${process.env.REACT_APP_API_URL}/api/comments/delete`, {\r\n        comment_id: comment_id\r\n      });\r\n      alert(\"Comment Deleted!\");\r\n      window.location.reload(); \r\n    }catch(e){\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n  return(\r\n  <div className=\"comment-box__container\">\r\n      <div className=\"comments-list\">\r\n\r\n        <div className=\"comment comment--root\">\r\n          <div className=\"comment__bar\"></div>\r\n\r\n          <div className=\"comment__header\">\r\n            <div className='comment__header-left_container'>\r\n              <img className=\"comment__author-avatar\" src={profile_image} alt=\"Profile Pic\" />\r\n              <Link to={'/profile/'+username}><span className=\"comment__author-name\">{username}</span></Link>\r\n              {isOwner && (<button className='post-header__edit-button'type=\"button\" onClick={handleDeleteComment}><img src={delete_icon}></img></button>)}\r\n            </div>\r\n          </div>\r\n          <div className=\"comment__content\">{content}</div>\r\n          <span className=\"comment__date\">{date}</span>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Comments"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}